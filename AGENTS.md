# Repository Guidelines

## Project Structure & Module Organization

- `src/`: Library source code. `src/index.ts` exposes the public logger API; `src/types.ts` holds shared types.
- `test/`: Vitest test suites (`*.test.ts`) and helpers.
- `dist/`: Compiled CJS/ESM bundles generated by `tsup` (do not edit by hand).
- Root config: `tsconfig.json`, `tsup.config.ts`, `vitest.config.ts`, `biome.json`, and `package.json`.

## Build, Test, and Development Commands

- Install: `pnpm install` (preferred; keep lockfile in sync).
- Dev build: `pnpm dev` runs `tsup` in watch mode for quick feedback.
- Production build: `pnpm build` outputs bundles and types to `dist/`.
- Tests: `pnpm test` (single run), `pnpm test:watch`, `pnpm test:coverage` (with V8 coverage reports).
- Quality: `pnpm format` and `pnpm check` use Biome for formatting and linting.

## Coding Style & Naming Conventions

- Language: TypeScript with strict options and ES module output.
- Formatting: spaces (no tabs), ~2-space indentation, 120-character line width, single quotes, trailing commas where valid.
- Naming: `camelCase` for variables/functions, `PascalCase` for types and classes, `SCREAMING_SNAKE_CASE` for constants.
- Always run `pnpm format` and `pnpm check` before committing.

## Testing Guidelines

- Framework: Vitest with `jsdom` environment; tests live in `test/` and end with `.test.ts`.
- Add or update tests for every new feature or bug fix; mirror the public API in `describe`/`it` blocks.
- Use `pnpm test` during development and `pnpm test:coverage` before opening a PR; avoid reducing coverage.

## Commit & Pull Request Guidelines

- Commits follow Conventional Commits, e.g. `feat: add log level override` or `build(ci): update release pipeline`.
- Keep commits focused and logically grouped.
- PRs should include: a brief description, reasoning for the change, how to reproduce and test (with commands), and README updates when public API or behavior changes.
- Prefer backward-compatible changes; call out any breaking behavior clearly in the PR description.

